sap.ui.define([                                                                                                                                                                                                                                                
	"sap/ui/core/mvc/Controller",                                                                                                                                                                                                                                 
	"sap/ui/model/Filter",                                                                                                                                                                                                                                        
	"sap/ui/model/FilterOperator",                                                                                                                                                                                                                                
	"sap/ui/Device"                                                                                                                                                                                                                                               
], function (Controller, Filter, FilterOperator, Device) {                                                                                                                                                                                                     
	"use strict";                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
	return Controller.extend("odsmfe.FormUI.controller.WorkOrderList", {                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
		/////////////////////////////////////////////////////////                                                                                                                                                                                                    
		// VARIABLES                                                                                                                                                                                                                                                 
		/////////////////////////////////////////////////////////                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
		/////////////////////////////////////////////////////////                                                                                                                                                                                                    
		// CONTROLLER LIFECYCLE EVENTS                                                                                                                                                                                                                               
		/////////////////////////////////////////////////////////                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
		onInit: function () {},                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
		onExit: function () {},                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
		/////////////////////////////////////////////////////////                                                                                                                                                                                                    
		// EVENTS                                                                                                                                                                                                                                                    
		/////////////////////////////////////////////////////////                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
		/////////////////////////////////////////////////////////                                                                                                                                                                                                    
		// FILTERBAR EVENTS                                                                                                                                                                                                                                          
		/////////////////////////////////////////////////////////                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
		onUpdateFinished: function (oEvent) {                                                                                                                                                                                                                        
			var oDataModel = this.getView().getModel("data");                                                                                                                                                                                                           
			oDataModel.setProperty("/workOrderList/count", oEvent.getSource().getBinding("items").getLength());                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onSearch: function (oEvent) {                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
			var aFilters = [],                                                                                                                                                                                                                                          
			 sQuery = oEvent.getParameter("query"),                                                                                                                                                                                                                     
			oList = this.getView().byId("idWorkOrderList"),                                                                                                                                                                                                             
			oBinding = oList.getBinding("items");                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
			if (sQuery) {                                                                                                                                                                                                                                               
				aFilters.push(new Filter("WorkOrderNumber", FilterOperator.EQ, sQuery));                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
			oBinding.filter(aFilters);                                                                                                                                                                                                                                  
		                                                                                                                                                                                                                                                             
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onItemPress: function (oEvent) {                                                                                                                                                                                                                             
			var oItem = oEvent.getParameter("listItem");                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
			var sWorkOrderNumber = oItem.getBindingContext().getProperty("WorkOrderNumber");                                                                                                                                                                            
			var sWoType = oItem.getBindingContext().getProperty("OrderType");                                                                                                                                                                                           
			var oModel = this.getView().getModel("app");                                                                                                                                                                                                                
			oModel.setProperty("/selectedWorkOrder", sWorkOrderNumber);                                                                                                                                                                                                 
			oModel.setProperty("/selectedOrderType", sWoType);                                                                                                                                                                                                          
			this.getOwnerComponent().getRouter().navTo("TargetWorkOrderFormList", {                                                                                                                                                                                     
				WorkOrderNumber: sWorkOrderNumber                                                                                                                                                                                                                          
						});                                                                                                                                                                                                                                                      
		}                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
	});                                                                                                                                                                                                                                                           
});                                                                                                                                                                                                                                                            